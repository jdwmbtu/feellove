<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Dashboard</title>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: #f8f9fa; margin: 0; padding: 20px; }
        h1 { margin: 20px 0; color: #2c3e50; }
        h2.clickable { cursor: pointer; }
        h2.clickable:hover { text-decoration: underline; color: #3498db; }

        /* Controls at top */
        #controls-container {
            max-width: 500px;
            margin: 20px auto;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* Schedule + Summary side-by-side */
        .top-row {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        .left-panel, .right-panel {
            flex: 1;
            min-width: 300px;
            max-width: 700px;
        }

        /* Full-width sections */
        .full-width {
            max-width: 1200px;
            margin: 40px auto;
        }

        .data-table {
            margin: 10px auto;
            border-collapse: collapse;
            width: 100%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
            background: white;
        }
        .data-table th, .data-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .data-table th { background: #e0e0e0; font-weight: bold; }
        .data-table tr:nth-child(even) { background-color: #f9f9f9; }
        .data-table tr:hover { background-color: #fffacd !important; }
        .negative { color: red; }

        /* Schedule Gantt */
        #schedule-container { margin: 20px 0; background: white; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); overflow: hidden; }
        .gantt-header {
            display: grid;
            grid-template-columns: 150px repeat(13, 1fr);
            font-weight: bold;
            background: #34495e;
            color: white;
            padding: 10px 0;
            border-radius: 8px 8px 0 0;
        }
        .gantt-header > div { text-align: center; padding: 8px 4px; font-size: 0.9em; }
        .hour { position: relative; }
        .hour span { position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%); font-size: 0.85em; }
        .hour::after { content: ''; position: absolute; top: 10px; left: 0; right: 0; height: 100%; border-left: 1px dotted #aaa; }
        .hour:nth-child(2)::after { border-right: 3px solid #27ae60; }
        .hour:nth-last-child(2)::after { border-right: 3px solid #27ae60; }
        .employee-row { display: grid; grid-template-columns: 150px 1fr; align-items: center; gap: 10px; padding: 6px 0; border-bottom: 1px solid #eee; }
        .employee-name { font-weight: bold; padding-left: 12px; }
        .timeline { position: relative; height: 44px; background: #f8f9fa; border-radius: 6px; overflow: hidden; }
        .shift-bar { position: absolute; top: 4px; height: 36px; background: #3498db; border-radius: 6px; color: white; font-weight: bold; display: flex; align-items: center; justify-content: center; font-size: 0.9em; box-shadow: 0 2px 4px rgba(0,0,0,0.15); }

       
        #chart-container { margin: 20px auto; width: 90%; max-width: 800px; height: 400px; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 10px; display: none; }

        @media (max-width: 768px) {
            .top-row { flex-direction: column; }
            .left-panel, .right-panel { max-width: 100%; }
        }
    </style>
</head>
<body>

<h1>FeelLove Coffee</h1>
<a href="summary_dashboard.html" style="display: inline-block; padding: 10px 20px; background: #3498db; color: white; text-decoration: none; border-radius: 4px; margin: 5px;">View All Store Summary Dashboard</a>

<!-- CONTROLS AT TOP -->
<div id="controls-container">
    <table class="data-table" style="font-size: 0.9em;">
        <tr><td><label for="month-filter">Month:</label></td><td><select id="month-filter" onchange="updateTables()"></select></td></tr>
        <tr><td><label for="store-filter">Store:</label></td><td>
            <select id="store-filter" onchange="updateTables()">
                <option value="CAFE">CAFE</option>
                <option value="FEELLOVE">FEELLOVE</option>
                <option value="SNOW">SNOW</option>
                <option value="ZION">ZION</option>
            </select>
        </td></tr>
        <tr><td><label for="growth-target">Growth Target:</label></td><td>
            <select id="growth-target" onchange="updateGrowthTarget()">
                <optgroup label="Percent">
                    <option value="10">+10%</option><option value="20">+20%</option><option value="25">+25%</option><option value="30">+30%</option>
                </optgroup>
                <optgroup label="Dollar ($K)">
                    <option value="5">+$5K</option><option value="10">+$10K</option><option value="15">+$15K</option><option value="20" selected>+$20K</option><option value="25">+$25K</option>
                </optgroup>
            </select>
        </td></tr>
        <tr><td><label>Adjusted:</label></td><td><label><input type="checkbox" id="adjusted-toggle" onchange="updateTables()"> Yes</label></td></tr>
    </table>
</div>

<!-- SCHEDULE (left) + SUMMARY (right) -->
<div class="top-row">
    <div class="left-panel">
        <h2 id="schedule-h2" class="clickable">Next Day Schedule<span id="schedule-date">loading…</span></h2>
        <div id="schedule-container" style="display: block;">
            <div id="gantt-chart" class="gantt">Loading schedule…</div>
        </div>
    </div>

      <div class="right-panel">
        <div style="display: flex; gap: 20px; flex-wrap: wrap;">
            <!-- Summary (left half) -->
            <div style="flex: 1; min-width: 300px;">
                <h2>Summary</h2>
                <table id="summary-table" class="data-table" style="font-size: 0.9em; width:100%;">
                    <thead>
                        <tr>
                            <th style="width: 40%;">Metric</th>
                            <th style="width: 60%;">Value</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <!-- 7-Day Prediction (right half) -->
            <div style="flex: 1; min-width: 300px;">
                <h2 id="seven-day-h2" class="clickable">Next 7 Days Prediction</h2>
                <div id="seven-day-prediction-container">
                    <table class="data-table" style="font-size:0.9em;">
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- DAILY METRICS -->
<div class="full-width">
    <h2 id="metrics-h2" class="clickable">Daily Metrics</h2>
    <div id="metrics-sub-headers"></div>
    <table id="metrics-table" class="data-table">
        <thead>
            <tr>
                <th rowspan="2">Day</th>
                <th id="sales-header" colspan="4">Sales</th>
                <th id="orders-header" colspan="4">Orders</th>
                <th id="aov-header" colspan="4">AOV</th>
            </tr>
            <tr>
                <th>2024</th><th>2025</th><th>$</th><th>%</th>
                <th>2024</th><th>2025</th><th>#</th><th>%</th>
                <th>2024</th><th>2025</th><th>$</th><th>%</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<!-- DAY COUNTS -->
<div class="full-width">
    <h2 id="daycount-h2" class="clickable">Day Counts by Month</h2>
    <table id="daycount-table" class="data-table">
        <thead><tr><th>Category</th><th>2024 Count</th><th>2025 Elapsed</th><th>2025 Remaining</th></tr></thead>
        <tbody></tbody>
    </table>
</div>

<!-- FORECAST + SCENARIOS (at the very bottom) -->
<div class="full-width">
    <div style="display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
        <div style="flex: 1; min-width: 300px;">
            <h2 id="forecast-h2" class="clickable">Simple Forecast</h2>
            <table id="forecast-table" class="data-table" style="font-size: 0.9em;">
                <thead><tr><th>Category</th><th>MTD</th><th>ROM</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
        <div style="flex: 1; min-width: 300px;">
            <h2 id="scenarios-h2" class="clickable">Scenarios</h2>
            <table id="scenarios-table" class="data-table" style="font-size: 0.9em;">
                <thead><tr><th>MTD</th><th>Scenario</th><th>ROM</th><th>Total</th><th>vs Target</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<div id="chart-container"></div>

<script src="script.js"></script>
</body>
</html>